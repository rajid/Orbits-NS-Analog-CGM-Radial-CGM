import{me as t}from"device";t.screen||(t.screen={width:348,height:250});export default class Graph{constructor(t){this._id=t,this._xscale=0,this._yscale=0,this._xmin=0,this._xmax=0,this._ymin=0,this._ymax=0,this._pointsize=2,this._direction="forward",this._bg=this._id.getElementById("bg"),this._vals=this._id.getElementsByClassName("gval"),this._tUH=200,this._tHigh=162,this._tLow=72,this._tUL=60,this._urgentHighColor="violet",this._highColor="blue",this._inRangeColor="lightgreen",this._lowColor="pink",this._urgentLowColor="red",this._tHighLine=this._id.getElementById("tHigh"),this._tLowLine=this._id.getElementById("tLow"),this._tUHLine=this._id.getElementById("tUrgentHigh"),this._tULLine=this._id.getElementById("tUrgentLow"),this._defaultYmin=40,this._defaultYmax=400,this._bgValue=0,this._bgUnits="bg/dL"}setPosition(t,i){this._id.x=t,this._id.y=i}setSize(t,i){this._width=t,this._height=i}setXRange(t,i){this._xmin=t,this._xmax=i,this._xscale=(i-t)/this._width}setYRange(t,i){this._ymin=t,this._ymax=i,this._yscale=(i-t)/this._id.height}getYmin(){return this._ymin}getYmax(){return this._ymax}setBGValue(t){this._bgValue=t}setBGUnits(t){this._bgUnits=t}bgValue(){return"mmol/L"===this._bgUnits?util.oneDecimal(util.mmol(this._bgValue)):this._bgValue}bgHigher(t){return t>0&&this.bgValue()>t}bgLower(t){return t>0&&this.bgValue()<t}setBGColor(t){this._bgcolor=t,this._bg.style.fill=t}setUH(t){this._tUH=t}setUHColor(t){this._urgentHighColor=t}setH(t){this._tHigh=t}H(){return this._tHigh}HC(){return this._highColor}setHColor(t){this._highColor=t}setIRColor(t){this._inRangeColor=t}setL(t){this._tLow=t}L(){return this._tLow}LC(){return this._lowColor}setLColor(t){this._lowColor=t}setUL(t){this._tUL=t}setULColor(t){this._urgentLowColor=t}maxBGs(){return 24}update(t){this._tHigh<=this._ymax&&this._tHigh>=this._ymin&&(this._tHighLine.y1=this._id.height-(this._tHigh-this._ymin)/this._yscale,this._tHighLine.y2=this._tHighLine.y1,this._tHighLine.x1=0,this._tHighLine.x2=this._id.width,this._tHighLine.style.display="inline",this._tHighLine.style.fill=this._highColor),this._tLow>=this._ymin&&this._tLow<=this._ymax&&(this._tLowLine.y1=this._id.height-(this._tLow-this._ymin)/this._yscale,this._tLowLine.y2=this._tLowLine.y1,this._tLowLine.x1=0,this._tLowLine.x2=this._id.width,this._tLowLine.style.display="inline",this._tLowLine.style.fill=this._lowColor),this._tUH<=this._ymax&&this._tUH>=this._ymin&&(this._tUHLine.y1=this._id.height-(this._tUH-this._ymin)/this._yscale,this._tUHLine.y2=this._tUHLine.y1,this._tUHLine.x1=0,this._tUHLine.x2=this._id.width,this._tUHLine.style.display="inline",this._tUHLine.style.fill=this._urgentHighColor),this._tUL>=this._ymin&&this._tLow<=this._ymax&&(this._tULLine.y1=this._id.height-(this._tUL-this._ymin)/this._yscale,this._tULLine.y2=this._tULLine.y1,this._tULLine.x1=0,this._tULLine.x2=this._id.width,this._tULLine.style.display="inline",this._tULLine.style.fill=this._urgentLowColor);let i=t[0].d,s=t[t.length-1].d,h=i-s;for(var e=0;e<t.length;e++){let i=t.length-1-e;this._vals[e].cy=this._id.height-(t[i].s-this._ymin)/this._yscale;let _=t[i].d-s;_/=h,this._vals[e].cx=_*(this._id.width-2)+1,t[i].c?this._vals[e].r=4:this._vals[e].r=2,this._vals[e].style.fill=this.setColor(t[i].s),this._vals[e].style.display="inline"}}setColor(t){return this._tUH>0&&t>this._tUH?this._urgentHighColor:this._tHigh>0&&t>this._tHigh?this._highColor:this._tUL>0&&t<this._tUL?this._urgentLowColor:this._tLow>0&&t<this._tLow?this._lowColor:this._inRangeColor}reset(){for(var t=0;t<this._vals.length;t++)this._vals[t].style.display="none";this._tHighLine.style.display="none",this._tLowLine.style.display="none",this._tUHLine.style.display="none",this._tULLine.style.display="none"}updateRgraph(){}};
